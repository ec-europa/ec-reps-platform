# =============================================================================
# Default Task Runner configuration
# =============================================================================

# -----------------------------------------------------------------------------
# Global Task Runner settings
# -----------------------------------------------------------------------------
runner:
  bin_dir: "./build/release/4.x/vendor/bin"

# -----------------------------------------------------------------------------
# Drupal-related settings.
# -----------------------------------------------------------------------------
#
# Value of "drupal.root_absolute" is derived at runtime.
# @see \EC\OpenEuropa\TaskRunner\Commands\DrupalCommands::setRuntimeConfig()
drupal:
  root: "build/develop"
  root_absolute: "../../"
  base_url: "http://web:8808"

  # Basic Drupal site information.
  site:
    name: "Site name"
    mail: "info@example.org"
    profile: "multisite_drupal_standard"
    update: "false"
    locale: "en"
    sites_subdir: "default"

  # Administrator account information.
  account:
    name: "admin"
    password: "admin"
    mail: "admin@example.org"

  # Database settings.
  database:
    host: "mysql"
    port: "3306"
    name: "drupal"
    user: "root"
    password: ""

  # Local Drush settings file will be generated by following default values.
  drush:
    options:
      ignored-directories: "${drupal.root}"
      uri: "${drupal.base_url}"

  # Following lines will be converted in PHP and appended to default.settings.php.
  settings:
    conf:
      file_scan_ignore_directories:
        - "node_modules"
        - "bower_components"
        - "vendor"
        - "${drupal.root}"

  # List of shell commands to be before and after the site installation.
  # You can use same syntax as the "commands:", check the documentation for more.
  # Configuration token replacement is supported too.
  pre_install: []
  post_install: []

# -----------------------------------------------------------------------------
# GitHub configuration values.
# -----------------------------------------------------------------------------
github:
  # GitHub personal access token token.
  # @link https://github.com/settings/tokens
  token: ~

# -----------------------------------------------------------------------------
# Toolkit properties to ease Drupal development.
# -----------------------------------------------------------------------------
toolkit:
  project:
    # Project identification.
    id: "stages2"
    production-url: ~
    playground-url: ~
  # Daily database dump settings.
  asda:
    url: "https://webgate.ec.europa.eu/fpfis/files-for/automate_dumps/${toolkit.project.id}"
    file: "sanitized_daily_multisite_${toolkit.project.id}_production.sql.gz"
    user: "automate_dumps"
    pass: "@todo:clean possible terminal output in command if used"
  # Cache locations.
  cache:
    local: ".tmp"
    global: "/tmp"

# -----------------------------------------------------------------------------
# List of dynamically-defined commands.
# -----------------------------------------------------------------------------
commands:
  toolkit:install-clone:
    - { task: "run", command: "drupal:drush-setup" }
    - { task: "run", command: "drupal:settings-setup" }
    - { task: "run", command: "toolkit:asda-download" }
    - { task: "run", command: "toolkit:asda-import" }

